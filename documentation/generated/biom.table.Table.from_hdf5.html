<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>biom.table.Table.from_hdf5 &#8212; biom-format.org</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css?v=dfa0e015" />
    <script src="../../_static/documentation_options.js?v=30ffe591"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/copybutton.js?v=1d1412a1"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="biom.table.Table.from_json" href="biom.table.Table.from_json.html" />
    <link rel="prev" title="biom.table.Table.from_adjacency" href="biom.table.Table.from_adjacency.html" /> 
  </head><body>
  
  <a href="https://github.com/biocore/biom-format"><img
    style="position: absolute; top: 0; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
    alt="Fork me on GitHub"></a>

      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>biom-format.org</span></a></h1>
        <h2 class="heading"><span>biom.table.Table.from_hdf5</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.from_adjacency.html">biom.table.Table.from_adjacency</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.from_json.html">biom.table.Table.from_json</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="biom-table-table-from-hdf5">
<h1>biom.table.Table.from_hdf5<a class="headerlink" href="#biom-table-table-from-hdf5" title="Link to this heading">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="biom.table.Table.from_hdf5">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Table.</span></span><span class="sig-name descname"><span class="pre">from_hdf5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5grp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sample'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parse_fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset_with_metadata</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#biom.table.Table.from_hdf5" title="Link to this definition">¶</a></dt>
<dd><p>Parse an HDF5 formatted BIOM table</p>
<p>If ids is provided, only the samples/observations listed in ids
(depending on the value of axis) will be loaded</p>
<p>The expected structure of this group is below. A few basic definitions,
N is the number of observations and M is the number of samples. Data
are stored in both compressed sparse row (for observation oriented
operations) and compressed sparse column (for sample oriented
operations).</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>h5grp</strong><span class="classifier">a h5py <code class="docutils literal notranslate"><span class="pre">Group</span></code> or an open h5py <code class="docutils literal notranslate"><span class="pre">File</span></code></span></dt><dd><p>The object to load from</p>
</dd>
<dt><strong>ids</strong><span class="classifier">iterable</span></dt><dd><p>The sample/observation ids of the samples/observations that we need
to retrieve from the hdf5 biom table</p>
</dd>
<dt><strong>axis</strong><span class="classifier">‘sample’, ‘observation’, optional</span></dt><dd><p>The axis to subset on</p>
</dd>
<dt><strong>parse_fs</strong><span class="classifier">dict, optional</span></dt><dd><p>Specify custom parsing functions for metadata fields. This dict is
expected to be {‘metadata_field’: function}, where the function
signature is (object) corresponding to a single row in the
associated metadata dataset. The return from this function an
object as well, and is the parsed representation of the metadata.</p>
</dd>
<dt><strong>subset_with_metadata</strong><span class="classifier">bool, optional</span></dt><dd><p>When subsetting (i.e., <cite>ids</cite> is <cite>not None</cite>), whether to also parse
the metadata. By default, the metadata are also subset. The reason
for exposing this functionality is that, for large tables, there
exists a very large overhead for this metadata manipulation.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>biom.Table</dt><dd><p>A BIOM <code class="docutils literal notranslate"><span class="pre">Table</span></code> object</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt>ValueError</dt><dd><p>If <cite>ids</cite> are not a subset of the samples or observations ids
present in the hdf5 biom table
If h5grp is not a HDF5 file or group</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="biom.table.Table.to_hdf5.html#biom.table.Table.to_hdf5" title="biom.table.Table.to_hdf5"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Table.to_hdf5</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The expected HDF5 group structure is below. An example of an HDF5 file
in DDL can be found here <a class="reference internal" href="#r83774063e2bd-1" id="id1">[1]</a>.</p>
<ul class="simple">
<li><p>./id                                                  : str, an arbitrary ID  # noqa</p></li>
<li><p>./type                                                : str, the table type (e.g, OTU table)  # noqa</p></li>
<li><p>./format-url                                          : str, a URL that describes the format  # noqa</p></li>
<li><p>./format-version                                      : two element tuple of int32, major and minor  # noqa</p></li>
<li><p>./generated-by                                        : str, what generated this file  # noqa</p></li>
<li><p>./creation-date                                       : str, ISO format  # noqa</p></li>
<li><p>./shape                                               : two element tuple of int32, N by M  # noqa</p></li>
<li><p>./nnz                                                 : int32 or int64, number of non zero elems  # noqa</p></li>
<li><p>./observation                                         : Group  # noqa</p></li>
<li><p>./observation/ids                                     : (N,) dataset of str or vlen str  # noqa</p></li>
<li><p>./observation/matrix                                  : Group  # noqa</p></li>
<li><p>./observation/matrix/data                             : (nnz,) dataset of float64  # noqa</p></li>
<li><p>./observation/matrix/indices                          : (nnz,) dataset of int32  # noqa</p></li>
<li><p>./observation/matrix/indptr                           : (M+1,) dataset of int32  # noqa</p></li>
<li><p>./observation/metadata                                : Group  # noqa</p></li>
<li><p>[./observation/metadata/foo]                          : Optional, (N,) dataset of any valid HDF5 type in index order with IDs.  # noqa</p></li>
<li><p>./observation/group-metadata                          : Group  # noqa</p></li>
<li><p>[./observation/group-metadata/foo]                    : Optional, (?,) dataset of group metadata that relates IDs  # noqa</p></li>
<li><p>[./observation/group-metadata/foo.attrs[‘data_type’]] : attribute of the foo dataset that describes contained type (e.g., newick)  # noqa</p></li>
<li><p>./sample                                              : Group  # noqa</p></li>
<li><p>./sample/ids                                          : (M,) dataset of str or vlen str  # noqa</p></li>
<li><p>./sample/matrix                                       : Group  # noqa</p></li>
<li><p>./sample/matrix/data                                  : (nnz,) dataset of float64  # noqa</p></li>
<li><p>./sample/matrix/indices                               : (nnz,) dataset of int32  # noqa</p></li>
<li><p>./sample/matrix/indptr                                : (N+1,) dataset of int32  # noqa</p></li>
<li><p>./sample/metadata                                     : Group  # noqa</p></li>
<li><p>[./sample/metadata/foo]                               : Optional, (M,) dataset of any valid HDF5 type in index order with IDs.  # noqa</p></li>
<li><p>./sample/group-metadata                               : Group  # noqa</p></li>
<li><p>[./sample/group-metadata/foo]                         : Optional, (?,) dataset of group metadata that relates IDs  # noqa</p></li>
<li><p>[./sample/group-metadata/foo.attrs[‘data_type’]]      : attribute of the foo dataset that describes contained type (e.g., newick)  # noqa</p></li>
</ul>
<p>The ‘?’ character on the dataset size means that it can be of arbitrary
length.</p>
<p>The expected structure for each of the metadata datasets is a list of
atomic type objects (int, float, str, …), where the index order of
the list corresponds to the index order of the relevant axis IDs.
Special metadata fields have been defined, and they are stored in a
specific way. Currently, the available special metadata fields are:</p>
<ul class="simple">
<li><p>taxonomy: (N, ?) dataset of str or vlen str</p></li>
<li><p>KEGG_Pathways: (N, ?) dataset of str or vlen str</p></li>
<li><p>collapsed_ids: (N, ?) dataset of str or vlen str</p></li>
</ul>
<p class="rubric">References</p>
<div role="list" class="citation-list">
<div class="citation" id="r83774063e2bd-1" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="http://biom-format.org/documentation/format_versions/biom-2.1.html">http://biom-format.org/documentation/format_versions/biom-2.1.html</a></p>
</div>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biom.table</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biom.util</span> <span class="kn">import</span> <span class="n">biom_open</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">biom_open</span><span class="p">(</span><span class="s1">&#39;rich_sparse_otu_table_hdf5.biom&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span> 
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">from_hdf5</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> 
</pre></div>
</div>
<p>Parse a hdf5 biom table subsetting observations
&gt;&gt;&gt; from biom.util import biom_open # doctest: +SKIP
&gt;&gt;&gt; from biom.parse import parse_biom_table
&gt;&gt;&gt; with biom_open(‘rich_sparse_otu_table_hdf5.biom’) as f # doctest: +SKIP
&gt;&gt;&gt;     t = Table.from_hdf5(f, ids=[“GG_OTU_1”],
…                         axis=’observation’) # doctest: +SKIP</p>
</dd></dl>

</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.from_adjacency.html">biom.table.Table.from_adjacency</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.from_json.html">biom.table.Table.from_json</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2024 The BIOM Format Development Team.
      Last updated on May 11, 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6636235-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>