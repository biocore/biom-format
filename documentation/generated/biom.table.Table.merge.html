<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>biom.table.Table.merge &#8212; biom-format.org</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css?v=dfa0e015" />
    <script src="../../_static/documentation_options.js?v=30ffe591"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/copybutton.js?v=1d1412a1"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="biom.table.Table.metadata" href="biom.table.Table.metadata.html" />
    <link rel="prev" title="biom.table.Table.max" href="biom.table.Table.max.html" /> 
  </head><body>
  
  <a href="https://github.com/biocore/biom-format"><img
    style="position: absolute; top: 0; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
    alt="Fork me on GitHub"></a>

      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>biom-format.org</span></a></h1>
        <h2 class="heading"><span>biom.table.Table.merge</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.max.html">biom.table.Table.max</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.metadata.html">biom.table.Table.metadata</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="biom-table-table-merge">
<h1>biom.table.Table.merge<a class="headerlink" href="#biom-table-table-merge" title="Link to this heading">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="biom.table.Table.merge">
<span class="sig-prename descclassname"><span class="pre">Table.</span></span><span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample='union'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation='union'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_metadata_f=&lt;function</span> <span class="pre">prefer_self&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_metadata_f=&lt;function</span> <span class="pre">prefer_self&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#biom.table.Table.merge" title="Link to this definition">¶</a></dt>
<dd><p>Merge two tables together</p>
<p>The axes, samples and observations, can be controlled independently.
Both can work on either “union” or “intersection”.</p>
<p><cite>sample_metadata_f</cite> and <cite>observation_metadata_f</cite> define how to
merge metadata between tables. The default is to just keep the metadata
associated to self if self has metadata otherwise take metadata from
other. These functions are given both metadata dicts and must return
a single metadata dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>other</strong><span class="classifier">biom.Table or Iterable of Table</span></dt><dd><p>The other table to merge with this one. If an iterable, the tables
are expected to not have metadata.</p>
</dd>
<dt><strong>sample</strong><span class="classifier">‘union’, ‘intersection’, optional</span></dt><dd><p>How the sample axis is handled</p>
</dd>
<dt><strong>observation</strong><span class="classifier">‘union’, ‘intersection’, optional</span></dt><dd><p>How the observation axis is handled</p>
</dd>
<dt><strong>sample_metadata_f</strong><span class="classifier">function, optional</span></dt><dd><p>Defaults to <code class="docutils literal notranslate"><span class="pre">biom.util.prefer_self</span></code>. Defines how to handle sample
metadata during merge.</p>
</dd>
<dt><strong>obesrvation_metadata_f</strong><span class="classifier">function, optional</span></dt><dd><p>Defaults to <code class="docutils literal notranslate"><span class="pre">biom.util.prefer_self</span></code>. Defines how to handle
observation metdata during merge.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>biom.Table</dt><dd><p>The merged table</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><dl class="simple">
<dt>If <code class="docutils literal notranslate"><span class="pre">sample_metadata_f</span></code> and <code class="docutils literal notranslate"><span class="pre">observation_metadata_f</span></code> are None,</dt><dd><p>then a fast merge is applied.</p>
</dd>
</dl>
</li>
<li><p>There is an implicit type conversion to <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p>The return type is always that of <code class="docutils literal notranslate"><span class="pre">self</span></code></p></li>
</ul>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biom.table</span> <span class="kn">import</span> <span class="n">Table</span>
</pre></div>
</div>
<p>Create a 2x2 table and a 3x2 table:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d_a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_a</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">d_a</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;O1&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d_b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_b</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">d_b</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;O1&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">,</span> <span class="s1">&#39;O3&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Merging the table results in the overlapping samples/observations (see
<cite>O1</cite> and <cite>S2</cite>) to be summed and the non-overlapping ones to be added to
the resulting table (see <cite>S3</cite>).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">merged_table</span> <span class="o">=</span> <span class="n">t_a</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">t_b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">merged_table</span><span class="p">)</span>  
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1      S2</span>
<span class="go">O1      6.0     5.0</span>
<span class="go">O2      6.0     4.0</span>
<span class="go">O3      10.0    10.0</span>
</pre></div>
</div>
</dd></dl>

</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.max.html">biom.table.Table.max</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.metadata.html">biom.table.Table.metadata</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2024 The BIOM Format Development Team.
      Last updated on May 11, 2024.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6636235-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>