<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>biom.table.Table.transform &mdash; biom-format.org</title>
    
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.1.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <link rel="top" title="biom-format.org" href="../../index.html" />
    <link rel="up" title="biom.table.Table" href="biom.table.Table.html" />
    <link rel="next" title="biom.table.Table.transpose" href="biom.table.Table.transpose.html" />
    <link rel="prev" title="biom.table.Table.to_tsv" href="biom.table.Table.to_tsv.html" /> 
  </head>
  <body>
  
  <a href="https://github.com/biocore/biom-format"><img
    style="position: absolute; top: 0; right: 0; border: 0;"
    src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
    alt="Fork me on GitHub"></a>

      <div class="header"><h1 class="heading"><a href="../../index.html">
          <span>biom-format.org</span></a></h1>
        <h2 class="heading"><span>biom.table.Table.transform</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.to_tsv.html">biom.table.Table.to_tsv</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.transpose.html">biom.table.Table.transpose</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="biom-table-table-transform">
<h1>biom.table.Table.transform<a class="headerlink" href="#biom-table-table-transform" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="biom.table.Table.transform">
<tt class="descclassname">Table.</tt><tt class="descname">transform</tt><big>(</big><em>f</em>, <em>axis='sample'</em>, <em>inplace=True</em><big>)</big><a class="headerlink" href="#biom.table.Table.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over <cite>axis</cite>, applying a function <cite>f</cite> to each vector.</p>
<p>Only non null values can be modified and the density of the
table can&#8217;t increase. However, zeroing values is fine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>f</strong> : function(data, id, metadata) -&gt; new data</p>
<blockquote>
<div><p>A function that takes three values: an array of nonzero
values corresponding to each observation or sample, an
observation or sample id, and an observation or sample
metadata entry. It must return an array of transformed
values that replace the original values.</p>
</div></blockquote>
<p><strong>axis</strong> : {&#8216;sample&#8217;, &#8216;observation&#8217;}, optional</p>
<blockquote>
<div><p>The axis to operate on. Can be &#8220;sample&#8221; or &#8220;observation&#8221;.</p>
</div></blockquote>
<p><strong>inplace</strong> : bool, optional</p>
<blockquote>
<div><p>Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>. Whether to return a new table or modify
itself.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">biom.Table</p>
<blockquote>
<div><p>Returns itself if <cite>inplace</cite>, else returns a new transformed table.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first"><strong>UnknownAxisError</strong></p>
<blockquote class="last">
<div><p>If provided an unrecognized axis.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">biom.table</span> <span class="kn">import</span> <span class="n">Table</span>
</pre></div>
</div>
<p>Create a 2x3 table</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">42</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;O1&#39;</span><span class="p">,</span> <span class="s1">&#39;O2&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;S3&#39;</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="s1">&#39;y&#39;</span><span class="p">}],</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> 
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1  S2  S3</span>
<span class="go">O1  0.0 0.0 1.0</span>
<span class="go">O2  1.0 3.0 42.0</span>
</pre></div>
</div>
<p>Create a transform function</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">data</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">md</span><span class="p">:</span> <span class="n">data</span> <span class="o">/</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Transform to a new table on samples</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table2</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table2</span><span class="p">)</span> 
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1  S2  S3</span>
<span class="go">O1  0.0 0.0 0.5</span>
<span class="go">O2  0.5 1.5 21.0</span>
</pre></div>
</div>
<p><cite>table</cite> hasn&#8217;t changed</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> 
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1  S2  S3</span>
<span class="go">O1  0.0 0.0 1.0</span>
<span class="go">O2  1.0 3.0 42.0</span>
</pre></div>
</div>
<p>Tranform in place on observations</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">table3</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;observation&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><cite>table</cite> is different now</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> 
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1  S2  S3</span>
<span class="go">O1  0.0 0.0 0.5</span>
<span class="go">O2  0.5 1.5 21.0</span>
</pre></div>
</div>
<p>but the table returned (<cite>table3</cite>) is the same as <cite>table</cite></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">table3</span><span class="p">)</span> 
<span class="go"># Constructed from biom file</span>
<span class="go">#OTU ID S1  S2  S3</span>
<span class="go">O1  0.0 0.0 0.5</span>
<span class="go">O2  0.5 1.5 21.0</span>
</pre></div>
</div>
</dd></dl>

</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="biom.table.Table.to_tsv.html">biom.table.Table.to_tsv</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="biom.table.Table.transpose.html">biom.table.Table.transpose</a>&#160;&#160;»
        </p>

      </div>


    <div class="footer">
        &copy; Copyright 2011-2022 The BIOM Format Development Team.
      Last updated on Mar 25, 2022.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6636235-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>